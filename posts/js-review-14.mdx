---
title: JavaScript Review ğŸ‘€ - 14í™”
date: "2023-06-25"
description: ë¹„ë™ê¸°ì˜ ì‹œì‘, Promise â—ï¸
tag: JS
---

### Promise ëŠ” ê°ì²´ ì…ë‹ˆë‹¤.

**ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê·¸ ê²°ê³¼ ê°’**ì„ `ì„±ê³µ`ì¸ì§€ `ì‹¤íŒ¨`ì¸ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.

### Promise ì˜ ìƒíƒœ

-   `pending` : ì´ì œ ë§‰ ì‹œì‘ëœ ì´ˆê¸° ìƒíƒœ
-   `fulfilled` : ë¹„ë™ê¸° ì½”ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ëœ ìƒíƒœ
-   `rejected` : ì‹¤íŒ¨í•œ ìƒíƒœ

### Promise ë¬¸ë²•

`new Promise()` ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

-   ë‘ ê°€ì§€ ì¸ìë¥¼ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.
-   ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰ í•œ ê²½ìš° .then ì„ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•  `resolve` ë¼ëŠ” í•¨ìˆ˜
-   ì‹¤íŒ¨í•œ ê²½ìš°ë¥¼ ì•Œë ¤ì£¼ëŠ” `reject` ë¥¼ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

```js
function relay(seconds){
    return new Promise((resolve, reject) => {
        if(!seconds || seconds < 0){
            reject(new Error('0ë³´ë‹¤ í° ìˆ˜ ì…ë ¥'))
        }
        setTimeout(resolve, seconds*10) // í•¨ìˆ˜ì˜ ì¸ìë¡œ ì•„ë¬´ê²ƒë„ ì „ë‹¬í•˜ì§€ ì•Šì•„ì„œ ì¶•ì•½í˜• ì‚¬ìš©
    });
}

relay(3)
    .then(() => {console.log('success')})
    .catch(error => console.log(error))
    .finally(() => console.log('end'))

-----

relay(3)
    .then(ì„±ê³µì ì´ë¼ë©´ í•„ìš”í•œ ë™ì‘)
    .catch(ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ ì˜ˆì™¸ì²˜ë¦¬)
    .finally(ì„±ê³µì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ìµœì¢…ì ìœ¼ë¡œ ë¬´ì¡°ê±´ í˜¸ì¶œ)
```

### Promise.resolve()

Promise ë¥¼ ë§Œë“¤ê³ ë‚˜ì„œ ì¦‰ê°ì ìœ¼ë¡œ resolve í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
function infoName(name) {
    return Promise.resolve(`Hello, ${name}`);
}

infoName("hyunho").then((res) => console.log(res)); // "Hello, hyunho"
```

-   infoName í•¨ìˆ˜ì—ì„œ ë°”ë¡œ Promise.resolve ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ê³ 
-   .then ì—ì„œëŠ” í•©ì³ì§„ ë¬¸ìì—´ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

### ì²´ì´ë‹

```js
function infoFirstName(first) {
    return Promise.resolve(`${first}`);
}

function infoLastName(last) {
    return Promise.resolve(`${last}, hyunho`);
}

function infoEnd(end) {
    return Promise.resolve(`Hello ${end}`);
}

function infoName() {
    return Promise.resolve(`Choi`);
}

infoName() // infoName ì˜ ê°’ 'Choi' ë¥¼ ê°€ì§€ê³ ì™€ì„œ
    .then((first) => infoFirstName(first)) // first ì— 'Choi' ê°€ ë“¤ì–´ê°€ê³ 
    .then((last) => infoLastName(last)) // last ì— 'Choi' ê°€ ë“¤ì–´ê°€ê³  â†’ Choi, hyunho
    .then((end) => infoEnd(end)) // end ì— Choi, hyunho ê°€ ì „ë‹¬ ë©ë‹ˆë‹¤.
    .then(console.log); // "Hello Choi, hyunho"

-----

# ì „ë‹¬í•˜ëŠ” ì¸ìì™€ í˜¸ì¶œí•˜ëŠ” ì¸ìê°€ ë™ì¼í•˜ì—¬ ìƒëµ ê°€ëŠ¥
infoName()
    .then(infoFirstName)
    .then(infoLastName)
    .then(infoEnd)
    .then(console.log); // "Hello Choi, hyunho"
```

### Promise.all

ì•„ë˜ ì½”ë“œëŠ” ê²°ê³¼ ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì´ 5ì´ˆê°€ ê±¸ë¦½ë‹ˆë‹¤.

```js
function getBanana() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve("ğŸŒ");
        }, 1000);
    });
}

function getApple() {
    return new Promise((resolve) => {
        setTimeout(() => {
            resolve("ğŸ");
        }, 4000);
    });
}

function getOrange() {
    return Promise.reject(new Error("no orange"));
}

// ë°”ë‚˜ë‚˜ê³¼ ì‚¬ê³¼ë¥¼ ê°™ì´ ê°€ì§€ê³  ì˜¤ê¸°
getBanana() //
    .then((banana) =>
        getApple() //
            .then((apple) => [banana, apple])
    )
    .then(console.log); // ì´ 5ì´ˆ
```

-   ìˆœì°¨ì ìœ¼ë¡œ Promise ë¥¼ ì§„í–‰í•˜ê¸° ë•Œë¬¸ ì…ë‹ˆë‹¤.
-   ìƒëŒ€ì ìœ¼ë¡œ ì‘ì—… ì‹œê°„ì´ ê¸´ Promise ê°€ ê°™ì´ ì‘ì—… ë  ê²½ìš° ì „ì²´ì ìœ¼ë¡œ ëŠë¦¬ê²Œ ì‘ë‹µì„ ë°›ê²Œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•´ê²° ë°©ì•ˆìœ¼ë¡œ ë³‘ë ¬ì ìœ¼ë¡œ Promise ë¥¼ ì§„í–‰ í•  ìˆ˜ ìˆëŠ” `Promise.all` ì´ ìˆìŠµë‹ˆë‹¤.

> Promise.all ì€ ë³‘ë ¬ì ìœ¼ë¡œ í•œ ë²ˆì— ëª¨ë“  Promise ë¥¼ ì‹¤í–‰ í•©ë‹ˆë‹¤.

```js
Promise.all([ë°°ì—´ë¡œ í•¨ìˆ˜ ì „ë‹¬])
    .then(res => console.log(res)) // ì„±ê³µì ìœ¼ë¡œ ëœë‹¤ë©´ ë°°ì—´ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤.
```

```js
Promise.all([getBanana(), getApple()]) // ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ì‹œì‘í•´ì„œ ì´ 4ì´ˆ í›„ ì‹¤í–‰ ë©ë‹ˆë‹¤.
    .then((fruits) => console.log("all", fruits));
```

<br />

### ê·¸ ì™¸ Promise í•¨ìˆ˜ë“¤

### Promise.race

ì£¼ì–´ì§„ Promise ì¤‘ì— ê°€ì¥ ë¹¨ë¦¬ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì‹¤í–‰

```js
Promise.race([getBanana(), getApple()]) // banana ë§Œ ì¶œë ¥
    .then((fruit) => console.log("race", fruit));
```

### Promise.allSettled

ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì½”ë“œë¥¼ `Promise.all` ë¡œ ë¬¶ì–´ì„œ í†µì‹ í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒ í•©ë‹ˆë‹¤.

```js
Promise.all([getBanana(), getApple(), getOrange()])
    .then((fruits) => console.log("error", fruits))
    .catch(console.log);
```

-   ë‹¹ì—°íˆ `.catch` ë¥¼ í†µí•´ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤.

ë§Œì•½ ì‹¤íŒ¨í•œ ê²°ê³¼ì— ëŒ€í•´ì„œë„ ë°›ì•„ì˜¤ê³  ì‹¶ë‹¤ë©´ `Promise.allSettled` ë¥¼ ì‚¬ìš© í•©ë‹ˆë‹¤.

```js
Promise.allSettled([getBanana(), getApple(), getOrange()])
    .then((fruits) => console.log("settle", fruits))
    .catch(console.log);
```

<br />

### ì •ë¦¬

`Promise` ëŠ” ì½œë°±í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ `Promise` ë¡œì§ì„ ë” ì‰½ê³  ê°„ê²°í•˜ê²Œ ì‚¬ìš© í•  ìˆ˜ ìˆëŠ” `async/await` ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

### ì°¸ê³ í•˜ë©´ ì¢‹ì€ ê¸€

-   [https://springfall.cc/post/7](https://springfall.cc/post/7)
-   [inpa.tistory](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%B2%98%EB%A6%AC-async-await)
